

# סימולטור תשאול מבוסס AI עם הפעלה קולית

## 1. תיאור האפליקציה

סימולטור תשאול אינטראקטיבי המיועד לאימון חניכים בטכניקות תשאול. האפליקציה משתמשת ב-Google Gemini API ליצירת תרחישים דינמיים, ניהול שיחה עם דמות נחקר וירטואלית, ומתן משוב על ביצועי החניך. המערכת תומכת בקלט ופלט קוליים בזמן אמת, כוללת אווטאר תלת-ממדי המגיב לאינטראקציה, ומאפשרת למדריכים להתערב בסימולציות פעילות ולנהל הגדרות מערכת בסיסיות, כולל סוגים שונים של סוכני AI. כעת כוללת גם תפקיד "מנהל מערכת" עם הרשאות מורחבות.

**האפליקציה שואפת להתפתח למוצר ברמה מסחרית מובילה, עם דגש על ריאליזם, חוויית משתמש מתקדמת, ויכולות אנליטיות מורחבות. תוכנית שיפורים מקיפה נמצאת כעת בביצוע.**

## 2. תכונות מרכזיות (נכון לגרסה 1.6.1 - מסייע AI איטרטיבי)

*   **ליבת AI וסימולציה:**
    *   יצירת תרחישים דינמית מבוססת Gemini API (`gemini-2.5-flash-preview-04-17`).
    *   ה-AI מגלם דמות נחקר ומגיב בעברית, בהתאם לתרחיש ולרמת הקושי.
    *   התנהגות AI פרואקטיבית ודינמית יותר: ה-AI יכול להציע צעדים, לבקש הבהרות, או לנסות בעדינות להניע את השיחה קדימה, במיוחד עבור סוכנים כלליים או כאשר השיחה נעצרת. ברמות קושי גבוהות, דמויות מסוימות עשויות לנסות להסיט נושא או לאתגר את החוקר.
    *   הוספת "מניע בסיסי" (Underlying Motivation) לדמות ה-AI: להשפעה על התנהגות עקבית ועומק פסיכולוגי.
    *   העמקת פרסונת ה-AI: הנחיה משופרת ל-AI לשלב בצורה מובהקת יותר את תכונות האישיות המוגדרות לו (`personalityTraits`) עם המניע הנסתר ורמת הקושי, ליצירת התנהגות עשירה ועקבית יותר.
    *   התאמת התנהגות ה-AI להתקדמות החקירה: ה-AI משנה את התנהגותו באופן הדרגתי (למשל, מידת שיתוף פעולה, לחץ) בהתאם להתקדמות האינטראקציה.
    *   תמיכה בשיחה טקסטואלית וקולית עם ה-AI.
    *   מתן משוב AI מפורט על ביצועי החניך (עבור סוכני תשאול), כולל "בניית אמון (Rapport)" ו"זיהוי רגעים מרכזיים". הנחיית המשוב שופרה כדי להתייחס באופן מפורש יותר לקלט של החניך.
    *   הנחיות AI (Directives) לאווטאר: הנחיית ה-AI לשימוש בהן שופרה לעידוד שימוש עקבי ומתאים יותר, עם רשימת אפשרויות ברורה.
    *   שימוש בכלים מדומים (`CHECK_POLICE_DATABASE`, `GET_CURRENT_TIME_AND_DATE`, `GENERAL_KNOWLEDGE_CHECK`).
    *   חידוד ראשוני של הנחיות AI ליצירת התנהגות מותאמת רמת קושי ותרחישים עשירים יותר.
    *   הרחבת זיכרון הקשר הנשלח ל-AI ל-10 ההודעות האחרונות.
*   **ממשק חניך (`TraineeView`):**
    *   הגדרת סימולציה מרובת שלבים: בחירת סוכן AI (עם `agentType`), ובאופן מותנה בחירת תפקיד, קושי ונושא.
    *   ממשק צ'אט עם הצגת הודעות (טקסט, משתמש, AI, מערכת) כולל חיווי "AI מקליד...".
    *   קלט קולי (Web Speech API) ופלט קולי (TTS באמצעות Web Speech API). תוקן באג איבוד פוקוס בשדה הקלט בזמן הקלדה.
    *   שילוב עם `gdm-live-audio` לשיחה קולית חיה (הלוגיקה המרכזית הותאמה לשימוש ב-`client.live.connect()` מתוך דוגמה עובדת, מוכן לבדיקות אינטגרציה מקיפות) ו-`gdm-live-audio-visuals-3d` לאווטאר כדור דינמי (בוצעו שיפורים וייצוב לרכיב, וכעת מגיב להנחיות אווטאר מה-AI).
    *   הצגת פרטי תרחיש/סוכן וקבלת משוב מפורט.
    *   מערכת רמזים בסיסית מבוססת AI.
    *   "יומן חקירה" (Investigation Log): הוספת `textarea` עם אייקון חיפוש וכפתור "נקה יומן" (עם אישור). שמירה ב-`localStorage`.
*   **ממשק מדריך/מנהל מערכת (`TrainerView`):**
    *   לוח בקרה עם לשוניות: ניהול משתמשים (למנהלי מערכת), התקדמות חניכים, התערבות בסימולציה, ניהול סוכני AI (למנהלי מערכת), והגדרות מערכת (למנהלי מערכת).
    *   ניהול משתמשים (הוספה, מחיקה, שינוי תפקיד) - זמין רק למנהלי מערכת.
    *   צפייה בהתקדמות חניכים: סטטיסטיקות, צפייה בתרחישים ומשובים.
    *   התערבות "בזמן אמת" (דמו): שליחת "לחישות" והנחיות ל-AI בסימולציות פעילות (הצגת צ'אט ושמירת היסטוריית פקודות משופרת).
    *   **ניהול סוכני AI (בהשראת MyGPTs):**
        *   ממשק משופר עם לשוניות (הגדרות, מסייע AI, ידע, פותחי שיחה, יכולות, פעולות).
        *   אפשרות להגדיר שם, תיאור, הנחיית מערכת, תכונות אישיות, מודל מומלץ, ויכולות (כמו שימוש בכלים, יצירת תמונות).
        *   ממשק (דמה כרגע) להעלאת קבצי "ידע" והצגת "פעולות" (כלים) זמינות.
        *   **מסייע AI איטרטיבי ליצירת סוכן:** המדריך יכול לתאר סוכן במילים חופשיות, לקבל הצעות מה-AI (שם, תיאור, הנחיה, תכונות), לבקש שיפורים להצעות אלו, ולהחיל את התוצאה הסופית על הגדרות הסוכן.
    *   הגדרות מערכת: ניקוי נתונים, איפוס הגדרות. זמין רק למנהלי מערכת.
*   **כללי:**
    *   עיצוב רספונסיבי עם תמיכה בערכות נושא (בהיר/כהה).
    *   ליטושי UI ושיפורי קריאות: בוצעו שיפורים קלים בטיפוגרפיה, ריווח, ועקביות אייקונים.
    *   טיפול בשגיאות בסיסי ומשוב למשתמש.
    *   הוספת בועות עזרה (Tooltips) לרכיבים אינטראקטיביים מרכזיים.

### 3. ארכיטקטורה וטכנולוגיות

*   **Frontend:** React (עם TypeScript), Tailwind CSS.
*   **Web Components:** LitElement עבור רכיבי אודיו וויזואליזציה (`gdm-live-audio`, `gdm-live-audio-visuals-3d`).
*   **API:** Google Gemini API (`@google/genai`).
*   **אינטראקציה קולית:** Web Speech API (SpeechRecognition, SpeechSynthesis).
*   **אחסון מקומי:** `localStorage` לנתוני משתמשים, סשנים, סוכנים מותאמים אישית ותרחישים שנוצרו.

### 4. תהליך התקנה והרצה

1.  **קבלת מפתח API:** יש להשיג מפתח API עבור Google Gemini ולהגדיר אותו כמשתנה סביבה בשם `API_KEY`.
2.  **הרצת האפליקציה:** פתח את הקובץ `index.html` בדפדפן התומך בתכונות מודרניות (כרום מומלץ).
3.  **גישה למאגר סוכני AI לדוגמה:** הקובץ `public/assets/ai-agents.json` נטען אוטומטית. ניתן לערוך אותו כדי להוסיף או לשנות סוכנים הנטענים כברירת מחדל.

### 5. הוראות שימוש בסיסיות

*   **כניסה:** השתמש באחד מהמשתמשים המוגדרים מראש (ראה `constants.ts` עבור פרטי ברירת מחדל, או צור משתמש חדש).
*   **תפקיד חניך:**
    1.  בחר "התחל סימולציה חדשה".
    2.  עבור דרך שלבי ההגדרה: בחר סוכן AI, ובאופן מותנה (אם זהו סוכן תשאול) את תפקיד הנחקר, רמת הקושי, ונושא החקירה.
    3.  אשר את הבחירות כדי ליצור תרחיש.
    4.  לאחר הצגת פרטי התרחיש, לחץ על "התחל חקירה" (או "התחל סשן" עבור סוכנים אחרים).
    5.  נהל שיחה עם ה-AI באמצעות טקסט או קול. השתמש ביומן החקירה לרישום הערות.
    6.  בסיום, לחץ על "סיים חקירה" וקבל משוב (עבור סוכני תשאול).
*   **תפקיד מדריך/מנהל מערכת:**
    *   גש ללשוניות השונות לניהול משתמשים, צפייה בהתקדמות, התערבות בסימולציות, ניהול סוכני AI, והגדרות מערכת (בהתאם להרשאות התפקיד).

### 6. חסרונות ידועים ומגבלות נוכחיות

*   **תלות ב-`localStorage`:** כל הנתונים נשמרים מקומית בדפדפן. אין סנכרון בין מכשירים או משתמשים שונים (מעבר לאותו דפדפן).
*   **אבטחת מפתח API:** מפתח ה-API של Gemini מוגדר כמשתנה סביבה ומשמש ישירות בצד הלקוח. **בסביבת ייצור אמיתית, חובה להשתמש ב-Backend Proxy לאבטחת המפתח.**
*   **איכות קול (TTS):** איכות הקול המופק על ידי Web Speech API מוגבלת ומשתנה בין דפדפנים ומערכות הפעלה.
*   **זיהוי דיבור (STT):** יכולת ההבנה של Web Speech API עשויה להיות פחות מדויקת מספקי STT מסחריים.
*   **תרגום:** כרגע אין תמיכה בתרגום אוטומטי. האפליקציה פועלת בעברית.
*   **בדיקות:** כיסוי בדיקות אוטומטיות חלקי.
*   **ניהול סוכני AI:**
    *   עריכת סוכנים שנטענו מקובץ (שאינם ברירת מחדל) היא זמנית (נשמרת בזיכרון הדפדפן בלבד) ולא משפיעה על הקובץ המקורי.
    *   רק סוכנים שנוצרו בממשק המדריך נשמרים באופן קבוע ב-`localStorage`.
    *   ממשק "ידע" (העלאת קבצים) ו"פעולות" (הגדרת כלים מותאמים אישית לסוכן) הם Placeholder ודורשים פיתוח Backend למימוש מלא.

### 7. תוכניות לעתיד (תמצית מתוך מפת הדרכים)

*   **הקמת Backend ייעודי:** לניהול משתמשים מרכזי, שמירת נתונים מאובטחת, ואבטחת מפתח API.
*   **שיפור משמעותי של האווטאר והאימרסיביות:** מעבר לאווטארים אנושיים, סביבות תלת-ממדיות, ושילוב שירותי TTS מבוססי ענן.
*   **הרחבת יכולות ה-AI:** תרחישים אדפטיביים, פרסונות עמוקות יותר, משוב מתקדם, שילוב קבצי ידע (RAG).
*   **פיתוח כלי ניהול מתקדמים למדריכים:** בונה תרחישים ויזואלי, אנליטיקות מורחבות, אינטגרציה עם LMS.
*   **שיפור מתמיד של UI/UX ונגישות.**
*   **הוספת כיסוי בדיקות מקיף.**

(לפירוט מלא, ראה `PROJECT_STATUS_AND_ROADMAP.md` ו-`COMMERCIALIZATION_STRATEGY.md`)
